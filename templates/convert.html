{% extends "base.html" %}
{% block title %}Timestamp Converter{% endblock %}
{% block content %}
    <h1>Unix Timestamp Converter</h1>
    <form id="timestampForm">
        <input type="text" id="timestamp" name="timestamp" placeholder="Enter timestamp" required> <!-- Example: 1725389600 -->
        <select id="timezone" name="timezone">
            <option value="UTC">UTC</option>
            <option value="America/New_York">Eastern Time (US & Canada)</option>
            <option value="America/Los_Angeles">Pacific Time (US & Canada)</option>
            <option value="Europe/London">London</option>
            <option value="Asia/Tokyo">Tokyo</option>
            <option value="Asia/Manila">Manila</option>
            <!-- Add more timezones as needed -->
        </select>
        <button type="submit">Convert</button>
    </form>
    <div id="result" style="font-weight: bold;">Converted Time:</div>
    <script>
        // This line sets up an event handler for the form submission event.
        // When the form with the ID "timestampForm" is submitted, the function will be called.
        // The 'event' parameter represents the event object associated with the submission.
        // The next line prevents the default form submission behavior, which would normally refresh the page.
        document.getElementById("timestampForm").onsubmit = function(event) {
            event.preventDefault();

            const timestamp = document.getElementById("timestamp").value;
            const timezone = document.getElementById("timezone").value;  // Get selected timezone
            
            // Convert timestamp to JavaScript Date object
            const date = new Date(parseInt(timestamp) * 1000);  // Unix timestamp is in seconds, multiply by 1000 to get milliseconds

            // Use Intl.DateTimeFormat to get localized time with proper timezone and DST handling
            const options = {
                timeZone: timezone,
                year: 'numeric',
                month: 'numeric',
                day: 'numeric',
                hour: 'numeric',
                minute: 'numeric',
                second: 'numeric',
                timeZoneName: 'long'  // This will return "Eastern Daylight Time", "Pacific Standard Time", etc.
            };

            const formatter = new Intl.DateTimeFormat('en-US', options);
            const formattedDate = formatter.format(date);

            // Display the result with automatic DST handling
            document.getElementById("result").innerText = `Converted Time: ${formattedDate}`;
        };
    </script>
    <a href="{{ url_for('dashboard') }}">Back to Dashboard</a>
    <a href="{{ url_for('logout') }}">Logout</a>
    {% endblock %}
</body>
