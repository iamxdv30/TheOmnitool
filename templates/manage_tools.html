{% extends "base.html" %} 
{% block content %} 
{% block style %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/manage_tools.css') }}"
/>
{% endblock %}

{% block scripts %}
<!-- Common utility scripts -->
<script src="{{ url_for('static', filename='js/utils/common.js') }}"></script>
<script src="{{ url_for('static', filename='js/utils/ajax.js') }}"></script>
<script src="{{ url_for('static', filename='js/utils/ui.js') }}"></script>

<!-- Page-specific script -->
<script src="{{ url_for('static', filename='js/pages/manage_tools.js') }}"></script>
{% endblock %}

<div class="manage-tools-container">
  <h1 class="manage-tools-title">Manage Tools</h1>

  <div id="flash-messages">
    {% include '_flash_messages.html' %}
  </div>

  <section class="add-tool-section">
    <h2 class="add-tool-title">Add New Tool</h2>
    <form
      action="{{ url_for('admin.manage_tools') }}"
      method="post"
      class="add-tool-form"
    >
      <div class="form-group">
        <input
          type="text"
          name="tool_name"
          placeholder="Tool Name"
          required
          class="add-tool-input"
        />
      </div>
      <div class="form-group">
        <textarea
          name="description"
          placeholder="Tool Description"
          class="add-tool-textarea"
        ></textarea>
      </div>
      <div class="form-group">
        <label class="add-tool-label">
          <input type="checkbox" name="is_default" class="add-tool-checkbox" />
          Is Default Tool
        </label>
      </div>
      <div class="form-group">
        <button type="submit" class="add-tool-btn">Add Tool</button>
      </div>
    </form>
  </section>

  <section class="existing-tools-section">
    <h2 class="existing-tools-title">Existing Tools</h2>
    <table class="existing-tools-table">
      <thead class="existing-tools-thead">
        <tr class="existing-tools-tr">
          <th class="existing-tools-th">Name</th>
          <th class="existing-tools-th">Description</th>
          <th class="existing-tools-th">Default</th>
          <th class="existing-tools-th">Actions</th>
        </tr>
      </thead>
      <tbody class="existing-tools-tbody">
        {% for tool in tools %}
        <tr class="existing-tools-tr">
          <td class="existing-tools-td">{{ tool.name }}</td>
          <td class="existing-tools-td">{{ tool.description }}</td>
          <td class="existing-tools-td">
            {{ 'Yes' if tool.is_default else 'No' }}
          </td>
          <td class="existing-tools-td">
            <div class="tool-actions">
              <button
                class="update-tool-btn"
                onclick="showUpdateForm('{{ tool.id }}', '{{ tool.name }}', '{{ tool.description }}', {{ tool.is_default|lower }})"
              >
                Update
              </button>
              <button
                class="delete-tool-btn"
                onclick="deleteTool('{{ tool.id }}')"
              >
                Delete
              </button>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <section id="updateForm" class="update-tool-section" style="display: none">
    <h2 class="update-tool-title">Update Tool</h2>
    <form
      class="update-tool-form"
      action="{{ url_for('admin.manage_tools') }}"
      method="post"
      id="updateToolForm"
    >
      <input type="hidden" name="tool_id" id="update_tool_id" />
      <div class="form-group">
        <input
          type="text"
          name="tool_name"
          id="update_tool_name"
          required
          class="update-tool-input"
        />
      </div>
      <div class="form-group">
        <textarea
          name="description"
          id="update_description"
          class="update-tool-textarea"
        ></textarea>
      </div>
      <div class="form-group">
        <label class="update-tool-label">
          <input
            type="checkbox"
            name="is_default"
            id="update_is_default"
            class="update-tool-checkbox"
          />
          Is Default Tool
        </label>
      </div>
      <div class="form-group">
        <button type="submit" class="update-tool-btn">Update Tool</button>
      </div>
    </form>
  </section>
</div>

<!-- Inline JavaScript has been moved to manage_tools.js -->
{% endblock %}
